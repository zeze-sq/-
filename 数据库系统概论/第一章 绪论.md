# 第一章 绪论

# 1. 数据库系统概述

## 0.思维导图

![20200324154116569](imgs\20200324154116569.png)

## 1.1 数据库的4个基本概念

### （1）数据–Data

> **数据(Data)是数据库中存储的基本对象** 

> ① **数据的定义** 描述事物的符号记录
>
> ② **数据的种类** 文本、图形、图像、音频、视频、学生的档案记录、货物的运输情况等
>
> ③ **数据的含义** 数据与其语义是不可分的

### （2）数据库–Database

> ① **数据库的定义** 数据库(Database,简称DB)是长期储存在计算机内、有组织、可共享的大量数据的集合。
>
> ② **数据库的基本特征** 数据按一定的数据模型组织、描述和储存 可为各种用户共享 较小冗余度 数据独立性较高 易扩展性

### （3）数据库管理系统–DataBase Management System

#### **3.1. DBMS是什么?** 

> DBMS是位于用户与操作系统之间的一层**数据管理软件**。是基础软件，是一个大型复杂的软件系统

#### **3.2. DBMS的主要功能 ** 

**3.2.1  数据定义功能** 提供数据定义语言(DDL)用来定义数据库中的数据对象

> **3.2.2 数据组织、存储和管理** 分类组织、存储和管理各种数据 确定组织数据的文件结构和存取方式 实现数据之间的联系 提供多种存取方法提高存取效率
>
> **3.2.3 数据操纵功能** 提供数据操纵语言(DML) 实现对数据库的基本操作 (查询、插入、删除和修改)
>
> **3.2.4  数据库的事务管理和运行管理** 数据库在建立、运行和维护时由DBMS统一管理和控制 保证数据的安全性、完整性、多用户对数据的并发使用 发生故障后的系统恢复
>
> **3.2.5  数据库的建立和维护功能** 数据库初始数据装载转换 数据库转储 介质故障恢复 数据库的重组织 性能监视分析等
>
> **3.2.6  其它功能** DBMS与网络中其它软件系统的通信 两个DBMS系统的数据转换 异构数据库之间的互访和互操作

### （4）数据库系统–Database System

> ① 什么是数据库系统（Database System，简称DBS） 在计算机系统中引入数据库后的系统构成
>
> ② 数据库系统的构成 数据库 Database 数据库管理系统（及其开发工具）Database Management System 应用系统 数据库管理员 Database Administrator

## 1.2  数据管理技术的产生和发展

### （1） 什么是数据管理

> 对数据进行分类、组织、编码、存储、检索和维护 数据处理的中心问题

### （2） 数据管理技术的发展过程

> 人工管理阶段 (20世纪40年代中–50年代中) 文件系统阶段 (20世纪50年代末–60年代中) 数据库系统阶段 (20世纪60年代末–现在)

### （3）时期

> 20世纪60年代末以来

### （4） 产生的背景

> 应用背景 大规模管理 硬件背景 大容量磁盘、磁盘阵列 软件背景 有数据库管理系统 处理方式 联机实时处理，分布处理，批处理

## 1.3  数据库系统的特点

-  **数据结构化**

> 整体数据的结构化是数据库的主要特征之一，也是数据库系统和文件系统的本质区别

- **数据共享性高，冗余度低且易扩充**

> 不再仅仅针对某一个应用，而是面向全组织 数据共享可以大大减少数据冗余，节约存储空间。数据共享还能够避免数据间的不相容性和不一致性。数据库的弹性大，易于扩充

- **数据库由数据库管理系统统一管理和控制**

> **DBMS（数据库）提供的数据控制功能**

> 1. 数据的安全性（Security）保护· 保护数据，以防止不合法的使用造成的数据的泄密和破坏。
> 2. 数据的完整性（Integrity）检查 将数据控制在有效的范围内，或保证数据之间满足一定的关系。 
> 3. 并发（Concurrency）控制 对多用户的并发操作加以控制和协调，防止相互干扰而得到错误的结果。
> 4. 数据库恢复（Recovery） 将数据库从错误状态恢复到某一已知的正确状态。

# 2.  数据模型

## 0.思维导图<img src="imgs\20200325154511288.png" alt="20200325154511288" style="zoom:;" />

### 数据模型的概念

> 在数据库中用数据模型这个工具来抽象、表示和处理现实世界中的数据和信息。 通俗地讲数据模型就是现实世界的模拟。

## 2.1  两大类数据模型

### 数据模型应满足三方面要求：

> 1. 能比较真实地模拟现实世界 
> 2. 容易为人所理解 
> 3. 便于在计算机上实现

### 数据模型分为两类

> (1) **概念模型**
>
> > 也称信息模型，它是按用户的观点来对数据和信息建模，用于数据库设计。
>
> (2) **逻辑模型和物理模型**
>
> > * **逻辑模型**主要包括网状模型、层次模型、关系模型、面向对象模型等，按计算机系统的观点对数据建模，用于DBMS实现。
> > * **物理模型**是对数据最底层的抽象，描述数据在系统内部的表示方式和存取方法，在磁盘或磁带上的存储方式和存取方法。

## 2.2   概念模型

> 概念模型用于信息世界的建模，是现实世界到机器世界的一个中间层次，是数据库设计的有力工具，数据库设计人员和用户之间进行交流的语言

> **对概念模型的基本要求:**
>
> 较强的语义表达能力 能够方便、直接地表达应用中的各种语义知识 简单、清晰、易于用户理解

### 2.2.1  信息世界中的基本概念

> * (1) 实体（Entity） 客观存在并可相互区别的事物称为实体。 可以是具体的人、事、物或抽象的概念。
> * (2) 属性（Attribute） 实体所具有的某一特性称为属性。 一个实体可以由若干个属性来刻画。
> * (3) 码（Key） 唯一标识实体的属性集称为码。
> * (4) 实体型（Entity Type） 用实体名及其属性名集合来抽象和刻画同类实体称为实体型
> * (5) 实体集（Entity Set） 同一类型实体的集合称为实体集
> * (6) 联系（Relationship） 现实世界中事物内部以及事物之间的联系在信息世界中反映为实体内部的联系和实体之间的联系。 实体内部的联系通常是指组成实体的各属性之间的联系 实体之间的联系通常是指不同实体集之间的联系

### 2.2.2 两个实体型之间的联系

> * ① 一对一联系（1:1）
>
> > 例如：一个班级只有一个正班长 一个班长只在一个班中任职
>
> * ② 一对多联系（1:n）
>
> > 例如：一个班级中有若干名学生， 每个学生只在一个班级中学习
>
> * ③ 多对多联系（m:n）
>
> > 例如：课程与学生之间的联系： 一门课程同时有若干个学生选修 一个学生可以同时选修多门课程

### 2.2.3  概念模型的一种表示方法

> **实体－联系方法(E-R方法)**
>
> E-R图也称实体-联系图(Entity Relationship Diagram)，提供了表示实体类型、属性和联系的方法，用E-R图来描述现实世界的概念模型 E-R方法也称为E-R模型

## 2.3  数据模型的组成要素

### (1)数据结构

> 数据结构是所研究的对象类型的集合。这些对象是数据库的组成成分，数据结构指对象和对象间联系的表达和实现，是对系统静态特征的描述，包括两个类别：
>
> - 数据本身：类型、内容、性质。例如关系模型中的域、属性、关系等。
> - 数据之间的联系：数据之间是如何相互关联的，例如关系模型中的主码、外码联系等。

### (2)数据操作

> 对数据库中各种对象(型)的实例(值)允许执行的操作，及有关的操作规则
>
> 数据操作的类型（两类）
>
> - 查询
> - 更新(包括插入、删除、修改)

### (3)数据的完整性约束条件

> 数据的完整性约束条件是一组完整性规则的集合，规定数据库状态及状态变化所应满足的条件，以保证数据的正确性、有效性和相容性。

## 2.4  层次模型

> 层次模型是数据库系统中最早出现的数据模型
>
> 层次模型用树形结构来表示各类实体以及实体间的联系

### **① 数据结构**

> 满足下面两个条件的基本层次联系的集合为层次模型
>
> - 有且只有一个结点没有双亲结点，这个结点称为根结点 
> - 根以外的其它结点有且只有一个双亲结点 
>
> 层次模型中的几个术语 
>
> * 根结点，双亲结点，兄弟结点，叶结点
> * ![屏幕截图 2022-11-06 185031](imgs\屏幕截图 2022-11-06 185031.jpg)

### ② 特点

> 结点的双亲是唯一的 只能直接处理一对多的实体联系 每个记录类型可以定义一个排序字段，也称为·码字段 没有一个子女记录值能够脱离双亲记录值而独立存在

### ③ 数据操纵与完整性约束

> **层次模型的数据操纵**：
>
> 查询 插入 删除 更新

### 层次模型的完整性约束条件：

> 无相应的双亲结点值就不能插入子女结点值 如果删除双亲结点值，则相应的子女结点值也被同时删除 更新操作时，应更新所有相应记录，以保证数据的一致性

### 优缺点

> 优点： 层次模型的数据结构比较简单清晰 查询效率高，性能优于关系模型，不低于网状模型 层次数据模型提供了良好的完整性支持
>
> 缺点： 多对多联系表示不合适 对插入和删除操作的限制多，应用程序的编写比较复杂 查询子女结点必须通过双亲结点 由于结构严密，层次命令趋于程序化

## 2.5  网状模型

> 网状数据库系统采用网状模型作为数据的组织方式

> 典型代表是DBTG系统：亦称CODASYL系统，70年代由DBTG提出的一个系统方案，奠定了数据库系统的基本概念、方法和技术

### ① 数据结构

> 满足下面两个条件的基本层次联系的集合：
>
> - 允许一个以上的结点无双亲；
> - 一个结点可以有多于一个的双亲。

### 网状模型与层次模型的区别:

> - 网状模型允许多个结点没有双亲结点 
> - 网状模型允许结点有多个双亲结点 
> - 网状模型允许两个结点之间有多种联系（复合联系）
> - 层次模型实际上是网状模型的一个特例 
> - 网状模型中子女结点与双亲结点的联系可以不唯一

### **② 网状数据模型的操纵与完整性约束**

> 网状数据库系统（如DBTG）对数据操纵加 了一些限制，提供了一定的完整性约束
>
> * 码：唯一标识记录的数据项的集合 
> * 一个联系中双亲记录与子女记录之间是一对多联系 
> * 支持双亲记录和子女记录之间某些约束条件

###  优缺点

> **优点** 能够更为直接地描述现实世界，如一个结点可以有多个双亲； 具有良好的性能，存取效率较高；

> **缺点** 结构比较复杂，而且随着应用环境的扩大，数据库的结构就变得越来越复杂，不利于最终用户掌握；

## 2.6 关系模型

> 关系数据库系统采用关系模型作为数据的组织方式 1970年美国IBM公司San Jose研究室的研究员E.F.Codd首次提出了数据库系统的关系模型 
>
> 计算机厂商新推出的数据库管理系统几乎都支持关系模型

### （1）数据结构

> 在用户观点下，关系模型中数据的逻辑结构是一张二维表，它由行和列组成。 几个名词解释：
>
> * 关系（Relation） 一个关系对应通常说的一张表
> * 元组（Tuple） 表中的一行即为一个元组
> * 属性（Attribute） 表中的一列即为一个属性，给每一个属性起一个名称即属性名
> * 主码（Key） 表中的某个属性组，它可以唯一确定一个元组。
> * 域（Domain） 属性的取值范围。分量 元组中的一个属性值。
> * 关系模式 对关系的描述 关系名（属性1，属性2，…，属性n） 学生（学号，姓名，年龄，性别，系，年级）
>
> 例： 学生、系、系与学生之间的·一对多联系： 学生（学号，姓名，年龄，性别，系号，年级） 系 (系号，系名，办公地点)

### （2）关系数据模型的操纵与完整性约束

> 数据操作是集合操作，操作对象和操作结果都是关系  ， 主要操作为， 查询 插入 删除 更新

# 3.  数据库系统结构

### 0.思维导图

![20200324154116569](.\imgs\20200324154116569.png)

## （1）两种角度

> 从数据库管理系统角度看，数据库系统通常采用三级模式结构，是数据库系统内部的系统结构
>
> 从数据库最终用户角度看（数据库系统外部的体系结构） ，数据库系统的结构分为: 单用户结构 主从式结构 分布式结构 客户／服务器

## （2）数据库系统模式的概念

> “型” 和“值” 的概念

> - **型(Type)**对某一类数据的结构和属性的说明 
> - **值(Value)** 是型的一个具体赋值
> - **模式（Schema）**数据库逻辑结构和特征的描述 是型的描述 反映的是数据的结构及其联系 模式是相对稳定的
> - **实例（Instance）**模式的一个具体值 反映数据库某一时刻的状态 同一个模式可以有很多实例 实例随数据库中的数据的更新而变动

## （3）数据库系统的三级模式结构

> ### ① 模式（Schema）
>
> 数据库中全体数据的逻辑结构和特征的描述 所有用户的公共数据视图，结合了所有用户的需求 一个数据库只有一个模式，***可以把模式看成唯一的数据库，实例就是数据库里面的多个表***
>
> 模式的地位：是数据库系统模式结构的中间层
>
> 与数据的物理存储细节和硬件环境无关 与具体的应用程序、开发工具及高级程序设计语言无关
>
> ### 模式的定义:
>
> 数据的逻辑结构（数据项的名字、类型、取值范围等） 数据之间的联系 数据有关的安全性、完整性要求
>
> ### ② 外模式（External Schema）
>
> 数据库用户（包括应用程序员和最终用户）使用的局部数据的逻辑结构和特征的描述 数据库用户的数据视图，是与某一应用有关的数据的逻辑表示 一个数据库只有一个模式，可以把模式看成唯一的数据库，实例就是数据库里面的多个表 外模式的地位：介于模式与应用之间
>
> 保证数据库安全性的一个有力措施； 每个用户只能看见和访问所对应的外模式中的数据；
>
> ### ③ 内模式（Internal Schema）
>
> 数据物理结构和存储方式的描述 是数据在数据库内部的表示方式: 记录的存储方式（顺序存储，按照B树结构存储，按hash方法存储） 索引的组织方式，数据是否压缩存储，数据是否加密 数据存储记录结构的规定 一个数据库只有一个内模式
>

## （4）数据库的二级映像功能与数据独立性

> 三级模式是对数据的三个抽象级别
>
> 二级映象在DBMS内部实现这三个抽象层次的联系和转换
>
> 外模式／模式映像 模式／内模式映像
>

> ### ① 外模式／模式映象
>
> 模式：描述的是数据的全局逻辑结构 外模式：描述的是数据的局部逻辑结构 同一个模式可以有任意多个外模式 每一个外模式，数据库系统都有一个外模式／模式映象，定义外模式与模式之间的对应关系，保证数据的逻辑独立性
>
> 当模式改变时，数据库管理员修改有关的外模式／模式映象，使外模式保持不变
>
> 应用程序是依据数据的外模式编写的，从而应用程序不必修改，保证了数据与程序的逻辑独立性，简称数据的逻辑独立性。
>
> ### ② 模式／内模式映象
>
> 模式／内模式映象定义了数据全局逻辑结构与存储结构之间的对应关系。 数据库中模式／内模式映象是唯一的 该映象定义通常包含在模式描述中 保证数据的物理独立性 应用程序不受影响。保证了数据与程序的物理独立性，简称数据的物理独立性。 特定的应用程序
>
> 保证了数据库外模式的稳定性 从底层保证了应用程序的稳定性，除非应用需求本身发生变化，否则应用程序一般不需要修改 数据与程序之间的独立性，使得数据的定义和描述可以从应用程序中分离出去
>

### 数据的存取由DBMS管理

用户不必考虑存取路径等细节 简化了应用程序的编制 大大减少了应用程序的维护和修改

# 4.  数据库系统的组成

### 0.思维导图

![](imgs\数据库系统的组成.png)

**数据库系统的组成**

> - 数据库
> - 数据库管理系统（及其开发工具）
> - 应用系统 
> - 数据库管理员 
> - 硬件平台及数据库
> - 软件
> - 人员

### 硬件平台及数据库

> 数据库系统对硬件资源的要求

> ### **(1) 足够大的内存**
>
> 操作系统 DBMS的核心模块 数据缓冲区 应用程序
>
> ### **(2) 足够大的外存**
>
> 磁盘或磁盘阵列 数据库 光盘、磁带 数据备份
>
> ### **(3) 较高的通道能力，提高数据传送率**
>

### 软件

> DBMS 支持DBMS运行的操作系统 与数据库接口的高级语言及其编译系统 以DBMS为核心的应用开发工具 为特定应用环境开发的数据库应用系统

### 人 员

> 数据库管理员 系统分析员和数据库设计人员 应用程序员 用户 不同的人员涉及不同的数据抽象级别，具有不同的数据视图

#### ① 数据库管理员(DBA)

> **具体职责**： 
>
> 1. 决定数据库中的信息内容和结构 
> 2. 决定数据库的存储结构和存取策略 
> 3. 定义数据的安全性要求和完整性约束条件 
> 4. 监控数据库的使用和运行 
> 5. 数据库的改进和重组、重构

#### ② 系统分析员和数据库设计人员

> **系统分析员具体职责**：
>
> 负责应用系统的需求分析和规范说明 与用户及DBA协商，确定系统的硬软件配置 参与数据库系统的概要设计
>
> **数据库设计人员具体职责**：
>
> 参加用户需求调查和系统分析 确定数据库中的数据 设计数据库各级模式
>

#### ③ 应用程序员

> **具体职责**：
>
> 设计和编写应用系统的程序模块 进行调试和安装
>

#### ④ 用户

> **用户是指最终用户**（**End** **User**）。 **最终用户通过应用系统的用户接口使用数据库**。
>
> 1.**偶然用户**
>
> 不经常访问数据库，但每次访问数据库时往往需要不同的数据库信息 企业或组织机构的高中级管理人员
>
> 2.**简单用户**
>
> 主要工作是查询和更新数据库 银行的职员、机票预定人员、旅馆总台服务员
>
> 3.**复杂用户**
>
> 工程师、科学家、经济学家、科技工作者等 直接使用数据库语言访问数据库，甚至能够基于数据库管理系统的API编制自己的应用程序

